

<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation sous Windows &mdash; Documentation Zeste de Savoir dev</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Installation de Elasticsearch (pour la recherche)" href="extra-install-es.html" />
    <link rel="prev" title="Installation sous macOS" href="install-osx.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Zeste de Savoir
          

          
          </a>

          
            
            
              <div class="version">
                dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../guides.html">Guides pas-à-pas</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../install.html">Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="install-linux.html">Installation sous Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="install-osx.html">Installation sous macOS</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installation sous Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cas-numero-1-windows-10-et-le-sous-systeme-linux">Cas numéro 1 : Windows 10 et le sous-système Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cas-numero-2-installation-sous-windows-lui-meme">Cas numéro 2 : installation sous Windows lui-même</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installation-automatique">Installation automatique</a></li>
<li class="toctree-l4"><a class="reference internal" href="#installation-manuelle">Installation manuelle</a></li>
<li class="toctree-l4"><a class="reference internal" href="#les-virtualenvs-et-pycharm">Les virtualenvs et PyCharm</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installation-des-outils-front-end-et-de-zmarkdown">Installation des outils front-end et de zmarkdown</a></li>
<li class="toctree-l3"><a class="reference internal" href="#suite-et-fin-de-l-installation">Suite et fin de l’installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#aller-plus-loin">Aller plus loin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="extra-install-es.html">Installation de Elasticsearch (pour la recherche)</a></li>
<li class="toctree-l2"><a class="reference internal" href="extra-install-frontend.html">Installation du frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="extra-install-latex.html">Installation de LaTeX et de la <em>template</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="extra-zmd.html">Installation et utilisation de zmarkdown</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contribuer à Zeste de Savoir</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow.html"><em>Workflow</em> et détails pratiques</a></li>
<li class="toctree-l1"><a class="reference internal" href="../back-end.html">Le <em>back-end</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="../back-end-code.html">Documentation technique du <em>back-end</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="../front-end.html">Le <em>front-end</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">Makefile et autres outils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../delay-issue.html">Problème de lenteur lors du dev ?</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Zeste de Savoir</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../install.html">Installation</a> &raquo;</li>
        
      <li>Installation sous Windows</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/install/install-windows.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation-sous-windows">
<h1>Installation sous Windows<a class="headerlink" href="#installation-sous-windows" title="Lien permanent vers ce titre">¶</a></h1>
<p>Pour installer une version locale de ZdS sur Windows, veuillez suivre les instructions suivantes.
Si une commande ne passe pas, essayez de savoir pourquoi avant de continuer.</p>
<p>Il est conseillé de lancer à chaque fois PowerShell en administrateur pour les étapes suivantes, et de se placer dans un dossier pour ZdS, par exemple :</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="k">cd</span> C:\dev\zestedesavoir
</pre></div>
</div>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Il est fortement recommandé (pour des raisons de compatibilité), d’installer tous les programmes ou en 32 bits, ou en 64 bits. Il est conseillé de ne pas mélanger les deux.</p>
</div>
<div class="section" id="cas-numero-1-windows-10-et-le-sous-systeme-linux">
<h2>Cas numéro 1 : Windows 10 et le sous-système Linux<a class="headerlink" href="#cas-numero-1-windows-10-et-le-sous-systeme-linux" title="Lien permanent vers ce titre">¶</a></h2>
<p>Utilisez <a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">le sous-système Linux</a>, et installez Zeste de Savoir comme si vous étiez sur la distribution choisie.</p>
<ul>
<li><dl>
<dt>Exemple pour le sous système Ubuntu</dt><dd><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt install build-essential git
git clone https://github.com/&lt;votre-pseudo&gt;/zds-site
<span class="nb">cd</span> zds-site
./scripts/install_zds.sh -packages ubuntu
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="cas-numero-2-installation-sous-windows-lui-meme">
<h2>Cas numéro 2 : installation sous Windows lui-même<a class="headerlink" href="#cas-numero-2-installation-sous-windows-lui-meme" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="installation-automatique">
<h3>Installation automatique<a class="headerlink" href="#installation-automatique" title="Lien permanent vers ce titre">¶</a></h3>
<p>Commencez par télécharger et installer <a class="reference external" href="https://www.python.org/">Python</a>. Installez PowerShell et autorisez l’exécution des scripts powershell en copiant cette ligne de code dans votre console : <code class="docutils literal notranslate"><span class="pre">powershell</span> <span class="pre">-Verb</span> <span class="pre">RunAs</span> <span class="pre">-ArgumentList</span> <span class="pre">&quot;Set-ExecutionPolicy</span> <span class="pre">RemoteSigned&quot;</span> <span class="pre">-WindowStyle</span> <span class="pre">Hidden</span> <span class="pre">-Wait</span></code>.</p>
<p>Ensuite, ouvrez la console de Windows et faites :</p>
<div class="highlight-batch notranslate"><div class="highlight"><pre><span></span><span class="k">cd</span> /ton/path/zds-site/
powershell .\scripts\win\install_zds.ps1 +full
</pre></div>
</div>
<p>Une fois l’installation finie, utilisez la <strong>console PowerShell</strong> et chargez l’environnement virtuel de votre espace de développement avec :</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="p">.</span> <span class="p">.\</span><span class="n">zdsenv</span><span class="p">\</span><span class="n">Scripts</span><span class="p">\</span><span class="n">activate</span><span class="p">.</span><span class="n">ps1</span>
</pre></div>
</div>
<p>Vous devriez obtenir :</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>zdsenv<span class="p">)</span>PS C:\dev\zestedesavoir\
</pre></div>
</div>
<p>Vous pouvez finalement lancer ZdS.</p>
<ul class="simple">
<li><p>Démarrer ZMD : <code class="docutils literal notranslate"><span class="pre">pm2</span> <span class="pre">start</span> <span class="pre">--name=zmarkdown</span> <span class="pre">-f</span> <span class="pre">zmd/node_modules/zmarkdown/server/index.js</span> <span class="pre">-i</span> <span class="pre">1</span></code></p></li>
<li><p>Démarrer Django : <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">runserver</span></code></p></li>
</ul>
</div>
<div class="section" id="installation-manuelle">
<h3>Installation manuelle<a class="headerlink" href="#installation-manuelle" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><p>Téléchargez <a class="reference external" href="http://gnuwin32.sourceforge.net/downlinks/zlib.php">zlib</a> (prérequis pour la bibliothèque <code class="docutils literal notranslate"><span class="pre">Pillow</span></code>)</p></li>
<li><dl class="simple">
<dt>Téléchargez et installez les outils suivants :</dt><dd><ul>
<li><p><a class="reference external" href="http://www.microsoft.com/fr-fr/download/details.aspx?id=40855">PowerShell 3.0+</a>. Uniquement pour les PC tournant sous Windows 7 ou antérieur (installé par défaut avec Windows depuis).</p></li>
<li><p><a class="reference external" href="http://git-scm.com/download/win">Git</a> (Git pour Eclipse ne suffit pas ; associez les .sh).</p></li>
<li><p><a class="reference external" href="https://mlocati.github.io/articles/gettext-iconv-windows.html">gettext</a>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><a class="reference external" href="https://www.python.org/downloads/release/python-368/">Téléchargez et installez Python 3.6</a>.</p></li>
<li><p>Installez setuptools : Démarrez Powershell en mode administrateur et lancez la commande suivante : <code class="docutils literal notranslate"><span class="pre">Set-ExecutionPolicy</span> <span class="pre">RemoteSigned</span></code></p></li>
<li><dl class="simple">
<dt>Installez Virtualenv avec les commandes suivante :</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">virtualenv</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Clonez le dépot git <em>via la console git</em> (ou bien avec powershell qui ne doit pas être exécuté en tant qu’administrateur): <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/zestedesavoir/zds-site.git</span></code></p></li>
<li><dl class="simple">
<dt>Créez votre workspace dédié à ZdS (mode administrateur obligatoire).</dt><dd><ul>
<li><p>se placer dans le dossier du dépôt cloné (<code class="docutils literal notranslate"><span class="pre">zds-site</span></code>)</p></li>
<li><p>tapez <code class="docutils literal notranslate"><span class="pre">virtualenv</span> <span class="pre">zdsenv</span></code> (il va alors créer l’environnement virtuel <code class="docutils literal notranslate"><span class="pre">zdenv</span></code>)</p></li>
<li><p>Activez l’environnement en exécutant le fichier <code class="docutils literal notranslate"><span class="pre">zdsenv/Scripts/activate.ps1</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>(?) Si vous avez <code class="docutils literal notranslate"><span class="pre">(zdsenv)</span></code> à gauche de la zone de saisie, c’est que vous êtes dans l’environnement <em>zdsenv</em>.</p>
<p>Pour redémarrer l’environnent virtuel les fois suivantes : exécutez à nouveau le fichier <code class="docutils literal notranslate"><span class="pre">zdsenv/Scripts/activate.ps1</span></code>.</p>
<div class="highlight-bat notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>zdsenv<span class="p">)</span>PS C:\dev\zestedesavoir\
</pre></div>
</div>
<p>Lancez par la suite <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--upgrade</span> <span class="pre">-r</span> <span class="pre">requirements-dev.txt</span></code>.</p>
<p>Si l’erreur suivante apparaît :</p>
<div class="admonition error">
<p class="admonition-title">Erreur</p>
<p>Unable to find vcvarsall.bat</p>
</div>
<p>Installez le compilateur Visual C++ pour Python <a class="reference external" href="https://www.microsoft.com/en-us/download/confirmation.aspx?id=44266">disponible ici</a>.</p>
<p>Pour que la modification soit effective, relancez une nouvelle fenêtre powershell.</p>
</div>
<div class="section" id="les-virtualenvs-et-pycharm">
<h3>Les virtualenvs et PyCharm<a class="headerlink" href="#les-virtualenvs-et-pycharm" title="Lien permanent vers ce titre">¶</a></h3>
<p>Avec PyCharm (pour avoir une license Pro contactez le directeur technique (DTC)) vous pouvez gérer les virtualenv de manière bien plus performante qu’avec la commande powershell de base.
Bien que le wrapper doive être installé comme dit au dessus, PyCharm vous offre une interface plus maniable.</p>
<p>Ouvrez le projet dans PyCharm, puis allez dans Fichier(File) → Settings
Dans <em>Project interpreter</em> sélectionnez la version “Python 3.x” que vous avez installé. Cliquez alors sur la roue dentée puis sur “Create virtualenv”. Vous pourrez alors sélectionner le dossier dans lequel se trouve le virtualenv et son accessibilité par PyCharm. PyCharm vous notifiera alors que vous n’avez pas toutes les dépendances et vous proposera de les installer.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Par défaut PyCharm ne va pas chercher les dépendances dans requirements-dev.txt.
Vous pouvez installer les dépendances depuis PowerShell ou bien aller dans l’onglet Tools des settings puis dans la partie « Python Integration » pour y changer temporairement le chemin vers le fichier de dépendances.</p>
</div>
</div>
</div>
<div class="section" id="installation-des-outils-front-end-et-de-zmarkdown">
<h2>Installation des outils front-end et de zmarkdown<a class="headerlink" href="#installation-des-outils-front-end-et-de-zmarkdown" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il vous faut installer les outils du front-end.
Pour cela, rendez-vous sur <a class="reference external" href="extra-install-frontend.html">la documentation dédiée</a>.
Ensuite, <a class="reference external" href="extra-zmd.html">installez zmarkdown</a></p>
</div>
<div class="section" id="suite-et-fin-de-l-installation">
<h2>Suite et fin de l’installation<a class="headerlink" href="#suite-et-fin-de-l-installation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Dans la console PowerShell via l’environnement zdsenv installez les dépendances:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--upgrade</span> <span class="pre">-r</span> <span class="pre">requirements-dev.txt</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">.\manage.py</span> <span class="pre">migrate</span></code> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">.\manage.py</span> <span class="pre">loaddata</span> <span class="pre">(dir</span> <span class="pre">.\fixtures\*.yaml)</span></code>, puis <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">.\manage.py</span> <span class="pre">load_factory_data</span> <span class="pre">.\fixtures\advanced\aide_tuto_media.yaml</span></code>, afin de créer <a class="reference external" href="../utils/fixture_loaders.html">le jeu de données utile au développement</a>.</p></li>
</ul>
<p>On peut finalement lancer ZdS:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">zmd/node_modules/zmarkdown</span> <span class="pre">&amp;&amp;</span> <span class="pre">npm</span> <span class="pre">run</span> <span class="pre">server</span></code> <a class="reference external" href="extra-zmd.html#utilisation">pour zmarkdown</a> ;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">runserver</span></code></p></li>
</ul>
</div>
<div class="section" id="aller-plus-loin">
<h2>Aller plus loin<a class="headerlink" href="#aller-plus-loin" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour faire fonctionner ZdS dans son ensemble vous devez installer les outils LateX et Elasticsearch:</p>
<ul class="simple">
<li><p><a class="reference external" href="extra-install-es.html">Installez Elasticsearch</a> ;</p></li>
<li><p><a class="reference external" href="extra-install-latex.html">Installez LaTeX</a>.</p></li>
</ul>
<p>Vous pouvez également <a class="reference external" href="../utils/git-pre-hook.html">indiquer à Git de ne pas effectuer de commit s’il y a des erreurs de formatage dans le code</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="extra-install-es.html" class="btn btn-neutral float-right" title="Installation de Elasticsearch (pour la recherche)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install-osx.html" class="btn btn-neutral float-left" title="Installation sous macOS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2014-2020, Zeste de Savoir

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>